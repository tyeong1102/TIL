# ch09. 중첩 선언과 익명 객체

### 중첩 클래스

 클래스 내부에 선언한 클래스를 말하는데, 이를 통해 클래스의 멤버를 쉽게 사용할 수 있고 외부에는 중첩 관계 클래스를 감춰 코드의 복잡성을 줄일 수 있다. 물론 클래스가 여러 클래스와 관계를 맺는 경우에는 독립적으로 선언하는 것이 좋지만, 특정 클래스와 관계를 맺을 떄는 중첩 클래스가 유지보수에 도움이 되기도 한다.

 선언 위치에 따라 크게 멤버 클래스와 로컬 클래스로 분류가 된다.

### 멤버 클래스

- 인스턴스 멤버 클래스
    
     A 클래스의 멤버로 선언된 B 클래스를 의미하는데 A 클래스 내부에서 사용되므로 B 클래스는 일반적으로 private 접근 제한을 가진다. 내부라 하더라도 인스턴스 필드값, 생성자, 인스턴스 메소드에서만 생성가능하다. 만약 B 객체를 A 클래스 외부에 생성하려면 default 또는 public 접근 제한을 가져야 하고, 아래 코드 처럼 A 객체를 먼저 생성한 다음에 생성해야 한다.
    
    ```java
    A a = new A();
    A.B b = a.new B(); // 정적 멤버 클래스는 이것만 있어도 가능
    ```
    
- 정적 멤버 클래스
    
     static 키워드와 함께 A 클래스의 멤버로 선언된 B 클래스를 의미한다. 인스턴스 멤버 클래스와는 달리 A 클래스 내부라면 어디에든 생성 가능하고, 외부에 생성할 떄도 A 객체 생성 없이 A 클래스로 접근하여 B 객체를 생성할 수 있다. 
    

### 로컬 클래스

생성자와 메소드가 실행될 동안에만 객체를 생성할 수 있다.

```java
public class A {
	// 생성자
	A() {
		// 로컬 클래스 선언
		class B { }
		// 로컬 객체 생성
		B b = new B();
	}
	// 메소드
	void method() {
		// 로컬 클래스 선언
		class B { }
		// 로컬 객체 생성
		B b = new B();
	}
}
```

로컬 변수를 로컬 클래스에서 사용할 경우 final 특성을 가지게 되어 값은 읽을 수만 있고 수정할 수 없게 된다. Java 8 이후 final 키워드를 명시적으로 붙이지 않아도 되지만, 가독성을 위해 붙이는 것도 좋다.

### 중첩 인터페이스

클래스의 멤버로 선언된 인터페이스를 말하는데, 이렇게 내부에 선언하는 이유는 해당 클래스와 긴밀한 관계를 맺는 구현 객체를 만들기 위해서이다. 접근 제한자를 별도로 사용하지 않으면 같은 패키지 안에서만 접근 가능하고, static을 추가해 A 객체 없이 B 인터페이스를 사용할 수 있게 할 수 있다.

### 익명 객체

이름 그대로 이름이 없는 객체를 말한다. 명시적으로 클래스를 선언하지 않기 때문에 쉽게 객체를 생성할 수 있지만, 클래스를 상속하거나 인터페이스를 구현해야만 생성할 수 있다는 제한사항이 있다.

- 익명 자식 객체
    
    부모 클래스로부터 상속받아 생성되는 객체로, 부모 타입에 대입되기 때문에, 부모 타입에 선언된 멤버만 접근할 수 있다. 이렇게 때문에 다형성을 구현하기 위한 재정의 코드가 주로 온다.
    
- 익명 구현 객체
    
    인터페이스를 구현해서 생성되는데 이벤트를 처리하는 객체로 많이 사용된다. 인터페이스 타입에 선언된 멤버만 접근할 수 있고, 주로 인터페이스의 추상 메소드를 재정의 하는 코드를 쓴다.