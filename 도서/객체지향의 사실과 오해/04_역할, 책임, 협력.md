# 4장. 역할, 책임, 협력

## 객체들 간의 협력에 집중하라

객체의 세계에서는 협력이라는 문맥이 객체의 행동 방식을 결정한다. 일단 협력이 자리를 잡게 되면, 객체의 행동이 드러나고 객체의 상태까지 결정된다. 이 협력은 한 객체가 다른 객체에게 요청을 하면서 시작되고 그 요청에 응답을 하면서 완성되기 때문에, 협력은 메세지를 통한 다수의 요청과 응답으로 구성된다. 그리고 이렇게 요청에 응답을 할 수 있는 이유는 해당 객체가 요청에 응답하기 위해 필요한 지식과 행동 방식을 가지고 있어 책임을 가지기 때문이다.

역할에 따른 책임이 명확해야 객체의 품질 또한 높아지게 되는데, 책임은 객체의 외부에 제공해 줄 수 있는 정보와 서비스의 목록이라고 할 수 있다. 즉 책임은 객체의 공용 인터페이스를 구성하는 것이다.

> 객체지향 설계는 협력에 참여하기 위해 어떤 객체가 어떤 책임을 수행하고 어떤 객체로부터 메세지를 수신할 것인지 결정하면서 시작된다.
> 

## 역할의 의미

어떤 객체가 협력 안에서 수행해야 하는 책임들이 있다면 그것은 그 객체가 가지는 역할이 있기 때문이다. 그런데 판사의 역할은 왕이 하기도 하고 왕이 왕비에게 위임을 하여 대체하기도 하는데 이 때 마다 ‘왕 판사’, ‘여왕 판사’ 따로 만들게 된다면 오히려 상황이 더 복잡해진다. 이를 방지하기 위해서 ‘**추상화**’가 필요하다.

우선 역할을 협력 내에서 다른 객체로 대체될 수 있는 표식이라고 생각해야 한다. 이렇게 대체 가능한 객체가 되기  위해서는 동일한 메시지를 동일한 방식으로 이해할 수 있어야 한다.

- 단순성(simplicity)
    
    역할을 이용한 추상화를 통해 협력의 양상을 단순화할 수 있다. 위의 예시 처럼 판사 역할을 하는 객체를 개별적으로 생각하면 협력의 양상이 다양해지지만 판사라는 역할을 부여하여 하나의 추상적인 협력으로 대체하면 협력을 단순화 할 수 있다.
    
- 유연성(flexibility)
    
    판사라는 하나의 역할에 왕과 왕비 같이 다양한 객체가 협력에 참여할 수 있기 때문에, 협력이 더 유연해진다.
    
- 재사용성(reusability)
    
    위와 같은 이유로 다양한 객체들이 동일한 협력에 참여할 수 있어서 재사용성 역시 올라간다.
    

> 객체지향 구조에서 가장 중요한 것은 협력을 정의하는 것이다. 우선 협력이 결정돼야 그에 필요한 책임을 고안하고 책임에 맞는 객체를 선택할 수 있기 때문이다. 그리고 이 책임을 객체에 얼마나 적절히 할당 했는지가 객체지향 설계의 품질을 결정한다.
> 

## 객체지향 설계 기법

- 책임-주도 설계(Responsibility-Driven Design)
    
    시스템이 사용자에게 제공해야 하는 시스템 책임을 작은 단위인 객체의 책임으로 변환하고 역할에게 책임을 할당하여 역할끼리 협력하게 하는 방식이다. 객체 간의 협력을 중요하게 생각하기 때문에 객체의 상태 보다는 상호작용에 더 중점을 둬 충분히 자율적이고 협조적인 객체들로 이루어진 생태계를 구성하게 된다.
    
- 디자인 패턴(Design Pattern)
    
    위의 책임 주도 설계는 역할, 책임, 협력을 고안하기 위한 방법과 절차를 제시 했다면 디자인 패턴은 그 결과를 표현한다. 절차 상에서 반복적으로 등장하는 문제가 있다면 그 문제와 문제를 해결할 수 있는 해법의 쌍으로 반복적으로 자주 등장하는 문제에 대한 해결방법을 미리 제시해 놓은 것이다.
    
- 테스트-주도 개발(Test-Driven Development)
    
    실패하는 테스트를 우선 작성하고 테스트를 통과하는 가장 간단한 코드를 통해 리팩터링을 하고 중복을 제거해 나가는 방식이다. 책임 주도 설계의 방향성을 테스트라는 안전장치를 활용하여 좀 더 안정적인 방법으로 도달할 수 있게 하는 것이다.
