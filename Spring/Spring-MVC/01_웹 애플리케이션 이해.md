# 웹 애플리케이션 이해

## 웹 서버, 웹 애플리케이션 서버

- 웹 서버(Web Server)
    
    HTTP 기반으로 동작하면서 정적 리소스(파일)를 제공한다. 사용자 별로 다른 이미지를 동적으로 출력하는 것이 불가능하다. 그런데 프로그램을 실행하는 기능도 플러그인 설치를 통해 할 수 있어서 아예 불가능한 것은 아니다.
    
- 웹 애플리케이션 서버(WAS)
    
    HTTP 기반으로 동작하는데 웹 서버의 기능을 포함하고 있다. 웹 서버와는 달리 프로그램 코드를 실행해서 애플리케이션 로직을 수행하기 때문에 동적으로 작동할 수 있다. 단순한 파일을 읽어서 클라이언트에 제공하기 때문에 죽을 일이 별로 없다.
    
    웹 서버의 기능을 포함하고 있어서 WAS와 DB 만으로도 정적 리소스와 애플리케이션 로직 모두 제공할 수 있지만, 너무 많은 역할을 담당해 서버 과부화의 우려가 있다. 그리고 WAS가 장애가 나면 웹 브라우저가 접근조차 할 수 없어서 오류 화면도 노출할 수 없어진다.
    

> 일반적으로는 웹 서버에 정적 리소스를 두고 만약 동적인 로직이 필요해지면 WAS가 처리하는 방식으로 구성한다. 그리고 필요에 따라 웹 서버를 증설하거나 WAS를 증설하는 것도 가능하다.
> 

## 서블릿

- 서블릿이란?
    
    HTTP 요청 정보를 편리하게 사용할 수 있는 HttpServletRequest와 응답 정보를 편리하게 제공할 수 있는 HttpServletResponse가 있다. 이로 인해 HTTP 스펙을 편리하게 사용할 수 있다.
    
- HTTP 요청, 응답 흐름
    
    WAS는 Request, Response 객체를 새로 만들어서 서블릿 객체를 호출한다. 이렇게 새롭게 만든 Request 객체에서 개발자는 HTTP 요청 정보를 꺼내서 사용하고, Response 객체에 HTTP 응답 정보를 입력한다. 이렇게 입력된 Response 객체의 내용으로 WAS는 HTTP 응답 정보를 생성한다.
    
- 서블릿 컨테이너
    
    톰캣 처럼 서블릿을 지원하는 WAS를 서블릿 컨테이너라고 하고 서블릿 객체의 생명주기를 관리한다. 
    
    그리고 서블릿 객체는 싱글톤으로 관리된다. 요청은 개별 유저에 따라서 요청이 올 때마다 새로 생성되는 것이 맞지만, 서블릿 객체는 로직만 있으면 되기 때문에 굳이 요청마다 새로 생성할 필요 없이 재사용하면 된다. 즉, 같은 서버라면 모든 고객의 요청은 동일한 서블릿 객체 인스턴스에 접근하게 되는 것이다. 이 때 공유 변수(멤버 변수)의 사용을 주의해야 한다. 다른 사람의 아이디로 로그인 하였는데 내 정보가 보일 수도 있기 때문이다.
    
    동시 요청을 위한 멀티 쓰레드 처리를 지원한다는 특징도 있다.
